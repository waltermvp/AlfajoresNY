# applications:
#   - appRoot: apps/website
#     frontend:
#       phases:
#         preBuild:
#           commands:
#             - rm -rf node_modules
#             - "npm install -g pnpm"
#             - "pnpm install"
#             - npx ampx generate outputs --branch main --app-id drxtabi3sq8sf
#             # - "pnpm run generate"
#             # - nvm use 20
#             # - npm install --silent --global expo-cli
#             # - |-
#             # if [ -f yarn.lock ]; then
#             #  yarn
#             # elif [ -f package-lock.json ] || [ -f npm-shrinkwrap.json ]; then
#             #  npm ci --cache .npm --prefer-offline
#             # else
#             #  npm install
#             # fi
#         build:
#           commands:
#             # - 'pnpm tailwindcss -i ./global.css -o ./node_modules/.cache/nativewind/main.css.web.css'
#             - "npx tailwindcss -i ./global.css -o ./node_modules/.cache/nativewind/global.css.web.css"
#             - "npx expo export --platform web"
#       artifacts:
#         baseDirectory: dist
#         files:
#           - "**/*"
#       cache:
#         paths:
#           - node_modules/**/*
#           - $(npm root --global)/**/*
applications:
  - frontend:
    phases:
      preBuild:
        commands:
          # - npm ci
          - rm -rf node_modules
          - "npm install -g pnpm"
          - "pnpm install"
      build:
        commands:
          - npm run build
          #             # - 'pnpm tailwindcss -i ./global.css -o ./node_modules/.cache/nativewind/main.css.web.css'
          - "npx tailwindcss -i ./global.css -o ./node_modules/.cache/nativewind/global.css.web.css"
          - "npx expo export --platform web"
    artifacts:
      baseDirectory: /
      files:
        - '**/*'
    cache:
      paths: []
    appRoot: backend
  # - frontend:
  #   phases:
  #     preBuild:
  #       commands:
  #         - npm ci
  #     build:
  #       commands:
  #         - npm run build
  #   artifacts:
  #     baseDirectory: /
  #     files:
  #       - '**/*'
  #   cache:
  #     paths: []
  #   appRoot: app2
